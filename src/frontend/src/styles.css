@import url("https://fonts.googleapis.com/css2?family=Bangers&display=swap");

:root{
  /* Neon Arcade on deep violet */
  --bg0:#14001f;
  --bg1:#0b0014;
  --panel0:#12001a;
  --panel1:#1a0626;
  --ink:#ffffff;
  --muted:#b6a9c4;
  --line:#2b153c;
  --line2:#3a1d55;

  --pink:#ff2d8d;
  --blue:#00e5ff;
  --yellow:#ffe600;

  --accent:var(--pink);
  --accent2:var(--blue);
  --good:#00ff88;
  --warn:#ff8800;
  --bad:#ff2d55;

  --ui: 1;
  --stroke: clamp(2px, calc(2px * var(--ui)), 5px);
  --radius: clamp(10px, calc(10px * var(--ui)), 22px);
  --gap: clamp(8px, calc(8px * var(--ui)), 18px);
  --bodyMin: 18px;
  --microMin: 16px;
  --hMin: 28px;
  --bodyMax: 28px;
  --microMax: 22px;
  --hMax: 44px;
  --fluid: 1.1vw;
  --fxNoise: 0;
  --fxGlow: 0.2;
  --durMicro: 220ms;
  --durSwap: 650ms;
  --durBig: 1200ms;
  --easeUI: cubic-bezier(.2,.8,.2,1);
  --shadow:0 14px 34px rgba(0,0,0,.60);
  --shadow2:0 0 0 2px rgba(0,0,0,.92);
}

:root[data-tier="1080"],
:root[data-tier="1440"],
:root[data-tier="2160"]{
  --fxNoise: 0.035;
  --fxGlow: 0.28;
  --durMicro: 260ms;
  --durSwap: 760ms;
  --durBig: 1400ms;
}

:root[data-tier="2160"]{
  --fxNoise: 0.05;
  --fxGlow: 0.32;
}

:root[data-tier="1080"]{
  --bodyMin: 20px;
  --microMin: 18px;
  --hMin: 30px;
  --safe-x-base: 24px;
  --safe-y-base: 14px;
  --action-safe-x-base: 18px;
  --action-safe-y-base: 10px;
}

:root[data-tier="720"]{
  --bodyMin: 21px;
  --microMin: 19px;
  --hMin: 32px;
  --safe-x-base: 22px;
  --safe-y-base: 12px;
  --action-safe-x-base: 16px;
  --action-safe-y-base: 9px;
}

@media (prefers-reduced-motion: reduce){
  :root{
    --durMicro: 0ms;
    --durSwap: 0ms;
    --durBig: 0ms;
  }
}

.mb-sprite{
  display: inline-block;
  background-image: var(--mb-sprite-url);
  background-size: 1024px 1024px;
  background-repeat: no-repeat;
  background-position: calc((var(--sx) * -128px) - var(--ox)) calc((var(--sy) * -128px) - var(--oy));
  filter: drop-shadow(0 2px 0 rgba(0,0,0,.70));
}
.mb-variant-normal{ opacity: 1; }
.mb-variant-active{ filter: drop-shadow(0 0 6px rgba(0,229,255,.35)) saturate(1.15); }
.mb-variant-alert{ filter: drop-shadow(0 0 8px rgba(255,45,141,.45)) saturate(1.2); }
.mb-variant-disabled{ opacity: .45; filter: grayscale(.9); }
.safe-guides{
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 50;
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  color: rgba(255,255,255,.9);
}
.safe-rect{
  position: absolute;
  border: 1px dashed rgba(255,255,255,.6);
  box-shadow: 0 0 0 1px rgba(0,0,0,.7) inset;
}
.safe-rect.action{ border-color: rgba(255,214,10,.9); }
.safe-rect.graphics{ border-color: rgba(0,229,255,.9); }
.safe-rect.title{ border-color: rgba(255,45,141,.85); opacity: .85; }
.safe-rect.action90{ border-color: rgba(255,255,255,.55); opacity: .65; }
.safe-rect.legacy{ border-style: dashed; }
.safe-rect.hd{ border-style: solid; }
.safe-rect.title.hd{ border-color: rgba(0,229,255,.75); opacity: .75; }
.safe-rect.action90.hd{ border-color: rgba(0,229,255,.45); opacity: .6; }
.safe-label{
  position: absolute;
  top: -18px;
  left: 4px;
  font-size: 12px;
  background: rgba(0,0,0,.5);
  padding: 2px 6px;
  border-radius: 6px;
}
.safe-ruler-x, .safe-ruler-y{
  position: absolute;
  display: flex;
  justify-content: space-between;
  font-size: 11px;
  color: rgba(255,255,255,.7);
}
.safe-ruler-x{ left: 0; right: 0; }
.safe-ruler-y{ top: 0; bottom: 0; flex-direction: column; }
.mb-badge-wrap{ position: relative; display: inline-grid; place-items: center; }
.mb-badge{
  position: absolute;
  top: -7px;
  right: -7px;
  min-width: 16px;
  height: 16px;
  padding: 0 5px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  font-weight: 900;
  font-size: 10px;
  letter-spacing: 0.3px;
  color: #0b0014;
  background: var(--yellow);
  border: 2px solid rgba(0,0,0,.85);
  box-shadow: 0 6px 18px rgba(0,0,0,.55);
}

html, body, #root {
  height: 100%;
  margin: 0;
  color: var(--ink);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  background:
    radial-gradient(1200px 700px at 12% 8%, rgba(255,45,141,.14), transparent 55%),
    radial-gradient(900px 700px at 88% 12%, rgba(0,229,255,.14), transparent 58%),
    radial-gradient(900px 700px at 58% 90%, rgba(255,230,0,.10), transparent 60%),
    linear-gradient(180deg, var(--bg1), var(--bg0));
}

/* Halftone texture (Persona/Hi‑Fi-ish) */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(circle at 1px 1px, rgba(255,255,255,.06) 1px, transparent 1.6px);
  background-size: 10px 10px;
  opacity:.35;
  mix-blend-mode: overlay;
  z-index:0;
}
.app, .main, .stream-root { position: relative; z-index: 1; }
.app { height: 100%; display: flex; flex-direction: column; }
.topbar { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; border-bottom: var(--stroke) solid var(--line); background: rgba(11,15,18,.75); backdrop-filter: blur(8px); }
.context-bar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 10px 16px;
  border-bottom: var(--stroke) solid var(--line);
  background: rgba(9,12,16,.85);
  position: sticky;
  top: 0;
  z-index: 8;
}
.context-title{ font-size: 12px; font-weight: 800; letter-spacing: .6px; text-transform: uppercase; color: rgba(255,255,255,.8); }
.context-fields{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; flex:1; justify-content:center; }
.context-field{ display:flex; align-items:center; gap:8px; }
.context-label{ font-size: 11px; text-transform: uppercase; letter-spacing: .5px; color: rgba(180,190,205,.75); }
.context-actions{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end; min-width: 220px; }
.context-chips{ display:flex; align-items:center; gap:6px; flex-wrap:wrap; }
.input-compact{ min-width: 140px; padding: 6px 10px; font-size: 11px; }
.select-compact{ padding: 6px 30px 6px 10px; font-size: 11px; }
.btn-compact{ padding: 4px 10px; font-size: 11px; }
.chip-compact{ font-size: 10px; padding: 1px 6px; letter-spacing: .4px; }
.brand {
  font-weight: 900;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  text-shadow: 0 2px 0 rgba(0,0,0,.8);
}
.nav a { color: #b9c1c7; text-decoration: none; margin-right: 12px; }
.nav a.active { color: var(--accent2); font-weight: 800; }
.main { flex: 1; padding: 16px; overflow: auto; }
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

.buildlab-graph{
  height: 440px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(5,7,9,.55);
  overflow: hidden;
}
.buildlab select, .buildlab input[type="number"]{
  background: rgba(11,0,20,.6);
  color: rgba(255,255,255,.9);
  border: 1px solid rgba(255,255,255,.16);
  border-radius: 10px;
  padding: 6px 8px;
}
.buildlab .lb-row.lb-item{ cursor: pointer; }
.buildlab .lb-row.lb-item:focus{ outline: 2px solid rgba(0,229,255,.55); outline-offset: 2px; }
.card {
  background: linear-gradient(180deg, rgba(15,20,24,.92), rgba(11,15,18,.92));
  border: var(--stroke) solid var(--line);
  border-radius: var(--radius);
  padding: 14px;
  box-shadow: var(--shadow2), var(--shadow);
  position: relative;
  overflow: hidden;
}
.card::after{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    linear-gradient(135deg, rgba(255,45,85,.18), transparent 55%),
    linear-gradient(315deg, rgba(0,229,255,.12), transparent 55%);
  opacity:.35;
  pointer-events:none;
}
.card > * { position: relative; z-index: 1; }
.kpis { display: flex; gap: 12px; }
.kpis-wrap { flex-wrap: wrap; }
.kpi { background: #0f1418; padding: 10px; border-radius: 8px; min-width: 120px; }
.kpi .label { font-size: 12px; color: #97a4ad; text-transform: uppercase; letter-spacing: 0.8px; }
.kpi .value { font-size: 22px; font-weight: 700; }
.events { display: flex; flex-direction: column; gap: 6px; max-height: 360px; overflow: auto; }
.event { display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px dashed #1b1f22; }
.badge {
  font-size: 11px;
  padding: 3px 8px;
  background: rgba(255,45,141,.16);
  color: var(--pink);
  border-radius: 999px;
  border: 1px solid rgba(255,45,141,.40);
  font-weight: 900;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  clip-path: polygon(0% 20%, 6% 0%, 92% 0%, 100% 30%, 98% 100%, 10% 100%, 0% 70%);
}
.muted { color: var(--muted); font-size: 12px; }
.table { width: 100%; border-collapse: collapse; font-size: 14px; }
.table th, .table td { text-align: left; padding: 8px; border-bottom: 1px solid #1b1f22; }
.table-compact th, .table-compact td { padding: 6px; font-size: 13px; }
.table-hover tbody tr:hover td { background: #0c141b; }
.table tr.active td { background: #0c1a24; }
.lb-lane-head{ width: 14px; }
.lb-lane{
  width: 14px;
  position: relative;
}
.lb-pace-mark{
  position: absolute;
  top: 50%;
  left: 2px;
  width: 12px;
  height: 2px;
  background: rgba(255,214,10,.9);
  transform: translateX(0);
  transition: transform var(--durMicro) var(--easeUI);
}
.lb-lane-mark{
  display: inline-block;
  width: 12px;
  text-align: center;
  color: rgba(255,255,255,.75);
  font-size: 12px;
}
.lb-lane-mark.idle{ opacity: .35; }
.lb-lane-mark.small{ color: rgba(0,229,255,.85); }
.lb-lane-mark.big{ color: rgba(255,214,10,.95); }
.lb-tag-head{ width: 32px; }
.lb-tag{ text-align: center; }
.overtake-ticker{
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
  margin-top: 6px;
  padding: 6px 8px;
  border-radius: 10px;
  background: rgba(11,0,20,.6);
  border: 1px solid rgba(255,255,255,.12);
  font-size: 12px;
}
.overtake-chip{
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,229,255,.12);
}
.lb-table{ display: flex; flex-direction: column; gap: 6px; }
.stream-leaderboard-card{ contain: layout paint; }
.lb-list{
  position: relative;
  height: calc((var(--lb-row-count) * var(--lb-row-step)) - var(--lb-row-gap));
  min-height: 0;
  overflow: hidden;
  contain: layout paint;
}
.lb-row{
  display: grid;
  grid-template-columns: 36px 18px 1fr 10ch 9ch 28px 7ch 6ch 80px var(--chipRailW);
  column-gap: calc(6px * var(--ui));
  align-items: center;
  font-size: 13px;
}
.layout-broadcast .lb-row{ font-size: 14px; }
:root[data-tier="720"] .layout-broadcast .lb-row{ font-size: 15px; }
.layout-broadcast .lb-agent-name{ font-size: 14px; }
:root[data-tier="720"] .layout-broadcast .lb-agent-name{ font-size: 16px; }
.lb-row.lb-item{
  position: absolute;
  left: 0;
  right: 0;
  height: var(--lb-row-h);
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(11,0,20,.42);
  box-shadow: 0 0 0 1px rgba(0,0,0,.75) inset;
  transform: translateY(calc(var(--lb-row-i) * var(--lb-row-step)));
  transition: transform var(--durSwap) var(--easeUI), background-color var(--durMicro) var(--easeUI), border-color var(--durMicro) var(--easeUI);
  contain: layout paint;
}
.lb-row.lb-item.swap-active{ will-change: transform; }
.lb-row .numeric{
  text-align: right;
  justify-self: end;
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
}
.lb-score, .lb-delta{ min-width: 0; display: flex; flex-direction: column; align-items: flex-end; }
.lb-score-main, .lb-score-sub, .lb-delta-main{ max-width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.lb-delta-sub{
  width: 100%;
  min-width: 0;
  min-height: 14px;
  display: flex;
  align-items: baseline;
  justify-content: flex-end;
  gap: 6px;
  white-space: nowrap;
  overflow: hidden;
}
.lb-row.lb-item.active{
  border-color: rgba(0,229,255,.45);
  background: rgba(0,229,255,.08);
}
.lb-row.lb-item.heat-up{
  background: linear-gradient(90deg, rgba(0,229,255,.22), rgba(11,0,20,.42));
  border-color: rgba(0,229,255,.35);
}
.lb-row.lb-item.heat-down{
  background: linear-gradient(90deg, rgba(255,45,141,.18), rgba(11,0,20,.42));
  border-color: rgba(255,45,141,.28);
}
.lb-row.lb-item.rank-up{
  background: linear-gradient(90deg, rgba(255,214,10,.18), rgba(11,0,20,.42));
  border-color: rgba(255,214,10,.28);
}
.lb-row.lb-item.lb-skel{
  background: rgba(11,0,20,.28);
  border-color: rgba(255,255,255,.06);
}
.lb-skel-bar{
  height: 10px;
  width: 100%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(255,255,255,.08), rgba(255,255,255,.18), rgba(255,255,255,.08));
  opacity: .6;
}
.lb-skel-bar.sub{ width: 70%; height: 8px; opacity: .45; margin-top: 4px; }
.lb-skel-name{
  height: 12px;
  width: 160px;
  border-radius: 999px;
  background: rgba(255,255,255,.16);
  opacity: .45;
}
.lb-skel-dot{
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.2);
  opacity: .6;
  display: inline-block;
}
.lb-row.lb-head{
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: rgba(255,255,255,.7);
  padding: 0 10px;
}
.lb-agent{ display: inline-flex; align-items: center; gap: 8px; min-width: 0; }
.lb-agent-name{ overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-weight: 900; }
.lb-extra{ display: none; justify-content: flex-end; }
.lbChipRail{ width: var(--chipRailW); overflow: hidden; display: none; gap: 6px; align-items: center; }
.chip{
  max-width: var(--chipMaxW);
  display: inline-flex;
  align-items: center;
  gap: calc(6px * var(--ui));
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(11,0,20,.6);
  opacity: 0;
  transform: translateY(calc(4px * var(--ui)));
  transition: opacity var(--durMicro) var(--easeUI), transform var(--durMicro) var(--easeUI);
  font-size: 12px;
}
.chip.isOn{ opacity: 1; transform: translateY(0); }
.chip-secondary{ opacity: .85; }
.chip-label{ max-width: calc(var(--chipMaxW) - 48px); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; font-weight: 900; letter-spacing: 0.3px; text-transform: uppercase; }
.chip-value{ margin-left: 4px; color: rgba(255,255,255,.9); }
.lb-pace-text{
  margin-left: 6px;
  font-size: 11px;
  color: rgba(255,214,10,.9);
  white-space: nowrap;
  display: inline-block;
  width: 10ch;
  text-align: right;
  overflow: hidden;
  text-overflow: ellipsis;
}
.lb-spark svg{ width: 60px; height: 16px; }
.lb-spark path{ fill: none; stroke: rgba(0,229,255,.7); stroke-width: 1.5; }

:root{ --chipRailW: 0px; --chipMaxW: 0px; --lb-row-h: 52px; --lb-row-gap: 6px; --lb-row-step: calc(var(--lb-row-h) + var(--lb-row-gap)); }
:root[data-tier="1440"]{ --chipRailW: 160px; --chipMaxW: 160px; }
:root[data-tier="2160"]{ --chipRailW: 240px; --chipMaxW: 240px; }
:root[data-tier="720"]{ --lb-row-h: 60px; }
.vision-on{ --lb-row-h: 66px; }

:root[data-tier="1440"] .lb-extra,
:root[data-tier="2160"] .lb-extra{ display: inline-flex; }

:root[data-tier="720"] .lb-spark,
:root[data-tier="1080"] .lb-spark{ display: none; }

:root[data-tier="2160"] .lb-spark{ display: inline-flex; }
:root[data-tier="1440"] .lbChipRail,
:root[data-tier="2160"] .lbChipRail{ display: inline-flex; }
:root[data-tier="1440"] .lbChipRail .chip:nth-child(n+2){ display: none; }

:root[data-tier="720"] .lb-pace-mark,
:root[data-tier="1080"] .lb-pace-mark{ display: none; }

:root[data-tier="1440"] .lb-pace-text,
:root[data-tier="2160"] .lb-pace-text{ display: none; }

@media (prefers-reduced-motion: reduce){
  .chip{ transition: none; transform: none; }
}
.table tbody tr.rank-up td{
  background: linear-gradient(90deg, rgba(0,229,255,.18), rgba(0,0,0,0));
  animation: rankClimb var(--durSwap) var(--easeUI) 1;
}
.table tbody tr.rank-big td{
  animation-duration: var(--durBig);
}
.instances { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 12px; }
.instance { background: #0f1418; border: 1px solid #1b1f22; border-radius: 8px; padding: 10px; }
.instance .row { display: flex; justify-content: space-between; }
.instance .name { font-weight: 700; }
.instance .stream { width: 100%; margin-top: 8px; border-radius: 6px; background: #050709; }
.instance .stream-placeholder { margin-top: 8px; text-align: center; padding: 24px 0; background: #050709; border-radius: 6px; }

.skills-grid { grid-template-columns: 1.1fr 0.9fr; }
.skills-table { grid-column: 1 / -1; }
.atlas-svg { width: 100%; aspect-ratio: 1 / 1; margin-top: 8px; border-radius: 12px; }
.timeline-scrub { display: flex; gap: 10px; align-items: center; margin: 8px 0; }
.timeline-scrub input[type="range"] { flex: 1; }
.timeline-svg { width: 100%; height: auto; border-radius: 12px; margin-top: 8px; }
.mini-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px; }
.mini-card { padding: 10px; border-radius: 12px; background: rgba(5,7,9,.86); border: 1px solid rgba(255,255,255,.10); }
.mini-card.active { border-color: rgba(0,229,255,.55); box-shadow: 0 0 0 1px rgba(0,229,255,.25) inset; }
.cause-focus { padding: 10px; border-radius: 12px; background: rgba(5,7,9,.86); border: 1px solid rgba(255,255,255,.10); }
.proto-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px; }
.proto { padding: 10px; border-radius: 12px; background: rgba(5,7,9,.86); border: 1px solid rgba(255,255,255,.10); }
.proto img { width: 100%; height: auto; display: block; border-radius: 10px; }
.row-between { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.row-inline { display: flex; align-items: center; gap: 10px; }
.toolbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-top:10px;
  flex-wrap:wrap;
}
.toolbar-left, .toolbar-right{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
.input, .select{
  background: rgba(11,15,18,.92);
  color: var(--ink);
  border: var(--stroke) solid var(--line);
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 12px;
  outline: none;
  box-shadow: var(--shadow2);
}
.input{ min-width: 220px; }
.select{ padding-right: 34px; }
.input::placeholder{ color: rgba(182,169,196,.75); }
.input:focus, .select:focus{ border-color: var(--line2); }
.chip{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 11px;
  border: 1px solid rgba(0,229,255,.35);
  color: rgba(0,229,255,.92);
  background: rgba(0,229,255,.08);
  font-weight: 800;
  letter-spacing: 0.3px;
  text-transform: uppercase;
}
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
.btn-ghost{
  background: transparent;
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: none;
}
.btn-ghost.active{
  border-color: rgba(0,229,255,.45);
  background: rgba(0,229,255,.12);
  color: rgba(255,255,255,.95);
}
.btn-ghost:hover{ border-color: rgba(255,255,255,.22); }
.statline{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin-top: 8px; }
.dot{ width: 10px; height: 10px; border-radius: 999px; display:inline-block; box-shadow: 0 0 0 2px rgba(0,0,0,.7); }
.dot-ok{ background: rgba(52,211,153,.95); }
.dot-bad{ background: rgba(251,113,133,.95); }
.subgrid{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.panel{
  background: rgba(11,15,18,.65);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  padding: 10px;
}
.code.code-tall{ max-height: 360px; }
.table td.clickable{ cursor: pointer; }
.btn {
  background: linear-gradient(180deg, rgba(15,20,24,.95), rgba(11,15,18,.95));
  color: var(--ink);
  border: var(--stroke) solid var(--line);
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 12px;
  cursor: pointer;
  font-weight: 900;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  box-shadow: var(--shadow2);
}
.btn:hover { border-color: var(--line2); transform: translateY(-1px); }
.btn:active { transform: translateY(0px); }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }
.split { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 10px; }
.kv { display: grid; grid-template-columns: 110px 1fr; gap: 6px 10px; margin-top: 6px; }
.kv .k { color: #97a4ad; font-size: 12px; text-transform: uppercase; letter-spacing: 0.8px; }
.kv .v { font-size: 12px; color: #d3d7db; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.chart { margin-top: 10px; }
.chart-head { display: flex; justify-content: space-between; align-items: center; gap: 12px; margin-bottom: 6px; }
.chart-svg { width: 100%; height: 240px; display: block; }
.legend { display: flex; flex-wrap: wrap; gap: 8px; }
.legend-item { display: inline-flex; align-items: center; gap: 6px; font-size: 12px; color: #b9c1c7; }
.legend-swatch { width: 10px; height: 10px; border-radius: 3px; border: 1px solid #1b1f22; }
.details { margin-top: 10px; }
.code { background: #050709; border: 1px solid #1b1f22; border-radius: 8px; padding: 10px; overflow: auto; max-height: 220px; font-size: 12px; }

.pill { display: inline-flex; align-items: center; gap: 6px; padding: 2px 8px; border-radius: 999px; font-size: 11px; border: 1px solid var(--line); box-shadow: var(--shadow2); }
.pill-ok { background: #061f14; color: #34d399; border-color: #123b28; }
.pill-missing { background: #24110f; color: #fb7185; border-color: #3b1714; }

/* Stream-facing HUD (OBS browser source) */
.hud{
  width: 100vw;
  height: 100vh;
  display: grid;
  place-items: center;
  overflow: hidden; /* never force page scroll */
}
.hud-fx{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}
.hud-noise{
  position: absolute;
  inset: 0;
  opacity: var(--fxNoise);
  mix-blend-mode: overlay;
  background-image:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.06) 0 1px, transparent 2px),
    radial-gradient(circle at 75% 25%, rgba(255,255,255,0.04) 0 1px, transparent 2px),
    radial-gradient(circle at 60% 70%, rgba(255,255,255,0.05) 0 1px, transparent 2px);
  background-size: 120px 120px;
}
.hud-vignette{
  position: absolute;
  inset: -10%;
  background:
    radial-gradient(90% 65% at 50% 42%, rgba(255,255,255,.05), rgba(0,0,0,.00) 55%),
    radial-gradient(120% 100% at 50% 50%, rgba(0,0,0,.20), rgba(0,0,0,.55) 70%, rgba(0,0,0,.80) 100%);
  opacity: .55;
  mix-blend-mode: multiply;
}
.hud-scanlines{
  position: absolute;
  inset: 0;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(0,0,0,0.0) 0px,
      rgba(0,0,0,0.0) 2px,
      rgba(0,0,0,0.18) 3px
    );
  opacity: .35;
  mix-blend-mode: multiply;
}
.hud-chroma{
  position: absolute;
  inset: -12%;
  background:
    radial-gradient(circle at 10% 10%, rgba(255,45,141,.18), transparent 55%),
    radial-gradient(circle at 90% 20%, rgba(0,229,255,.14), transparent 55%),
    radial-gradient(circle at 55% 90%, rgba(255,230,0,.10), transparent 60%);
  opacity: .25;
  mix-blend-mode: screen;
  filter: blur(0.3px);
}
.hud-canvas{
  aspect-ratio: 16 / 9;
  width: min(100vw, calc(100vh * 16 / 9));
  height: min(100vh, calc(100vw * 9 / 16));
  overflow: hidden;
  background: transparent;
}
.hud-stage{
  width: var(--hud-w, 1280px);
  height: var(--hud-h, 720px);
  transform-origin: 0 0;
  position: relative;
  --safe-x: var(--safe-x-base, 64px);
  --safe-y: var(--safe-y-base, 36px);
}

.stream-root{
  /* Broadcast-safe padding for 1280×720 (graphics-safe 5%, action-safe 3.5%). */
  --safe-x: var(--safe-x-base, 64px);
  --safe-y: var(--safe-y-base, 36px);
  --action-safe-x: var(--action-safe-x-base, 45px);
  --action-safe-y: var(--action-safe-y-base, 25px);
  --layout-scale: 1;
  width: 100%;
  height: 100%;
  background: transparent;
  color: var(--ink);
  padding: var(--safe-y) var(--safe-x);
  box-sizing: border-box;
  transform: scale(var(--layout-scale));
  transform-origin: 0 0;
  width: calc(100% / var(--layout-scale));
  height: calc(100% / var(--layout-scale));
}
.layout-broadcast{ --layout-scale: 1; }
.layout-dense{ --layout-scale: 0.9; }
:root[data-tier="1080"] .layout-broadcast{ --layout-scale: 1.25; }
:root[data-tier="720"] .layout-broadcast{ --layout-scale: 1.4; }
.vision-on.layout-broadcast{ --layout-scale: 1.08; }
.vision-on.layout-dense{ --layout-scale: 0.98; }
.stream-root .muted{ font-size: 14px; }
.stream-layout{ height: 100%; display: grid; grid-template-rows: 56px 104px 1fr; gap: 10px; }
.stream-top {
  display: flex; align-items: center; justify-content: space-between; gap: 16px;
  padding: 10px 12px;
  border: var(--stroke) solid var(--line);
  border-radius: var(--radius);
  background: linear-gradient(180deg, rgba(15,20,24,.88), rgba(11,15,18,.88));
  box-shadow: var(--shadow2), var(--shadow);
}
.stream-title {
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-weight: 400;
  letter-spacing: 1.2px;
  font-size: clamp(var(--hMin), 1.6vw, var(--hMax));
  text-transform: uppercase;
  text-shadow: 0 2px 0 rgba(0,0,0,.9);
}
.stream-ticker{
  margin-top: 6px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(11,0,20,.62);
  box-shadow: var(--shadow2);
  max-width: 980px;
}
.stream-ticker-dot{
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(34,211,238,.95);
  box-shadow: 0 0 18px rgba(34,211,238,.24);
  animation: tickerDot 900ms ease-in-out infinite;
}
@keyframes tickerDot{
  0% { transform: scale(.8); opacity: .55; }
  50% { transform: scale(1.15); opacity: 1; }
  100% { transform: scale(.8); opacity: .55; }
}
.stream-ticker-text{
  font-size: clamp(var(--microMin), 0.9vw, var(--microMax));
  color: rgba(255,255,255,.88);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.stream-kpis { display: flex; gap: 14px; }
.stream-kpi-debug{ min-width: 160px; }
.debug-strip{ display: flex; gap: 8px; align-items: center; }
.stream-kpi {
  background: rgba(26,6,38,.92);
  border: var(--stroke) solid var(--line);
  border-radius: var(--radius);
  padding: 8px 12px;
  min-width: 120px;
  box-shadow: var(--shadow2);
  clip-path: polygon(0% 15%, 7% 0%, 100% 0%, 100% 85%, 93% 100%, 0% 100%);
}
.status-pill{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 900;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  border: 1px solid rgba(255,255,255,.2);
  background: rgba(11,0,20,.6);
}
.status-pill.on{ border-color: rgba(0,229,255,.6); color: rgba(255,255,255,.95); }
.status-pill.off{ border-color: rgba(255,255,255,.2); color: rgba(255,255,255,.75); }
.stream-kpi-value {
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-weight: 400;
  font-size: clamp(22px, 1.4vw, 34px);
  letter-spacing: 1px;
  -webkit-text-stroke: 1px rgba(0,0,0,.85);
  text-shadow: 0 3px 0 rgba(0,0,0,.85);
  animation: valueSlam 280ms cubic-bezier(.2,1.2,.2,1) 1;
}

.fuse-wrap{ margin-top: 0; }
.fuse{
  width: 100%;
  height: 42px;
  border: var(--stroke) solid var(--line);
  border-radius: var(--radius);
  clip-path: polygon(0% 10%, 2% 0%, 100% 0%, 100% 92%, 98% 100%, 0% 100%);
  box-shadow: var(--shadow2);
  background: linear-gradient(180deg, rgba(26,6,38,.88), rgba(18,0,26,.88));
}
.fuse-cool .fuse-wr,
.fuse-cool .fuse-wr-label,
.fuse-cool .fuse-now,
.fuse-cool .fuse-now-dot,
.fuse-cool .fuse-now-label{
  opacity: .55;
}
.fuse-cool .fuse-bar{ opacity: .8; }
.fuse-bg{ fill: rgba(18,0,26,.88); }
.fuse-centerline{ stroke: rgba(255,255,255,.12); stroke-width: 2; stroke-dasharray: 6 10; }
.fuse-bar{ rx: 6; ry: 6; }
.fuse-bar-neutral{ fill: rgba(125,211,252,.35); }
.fuse-bar-death{ fill: rgba(255,68,68,.45); }
.fuse-bar-victory{ fill: rgba(52,211,153,.45); }
.fuse-bar-crash{ fill: rgba(255,136,255,.45); }
.fuse-bar-agg{ fill: rgba(255,255,255,.10); }
.fuse-wr{ stroke: rgba(255,255,0,.75); stroke-width: 2; stroke-dasharray: 5 5; }
.fuse-wr-label{ fill: rgba(255,255,0,.9); font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif; font-size: 12px; -webkit-text-stroke: 1px rgba(0,0,0,.85); }
.fuse-life{ stroke: rgba(34,211,238,.9); stroke-width: 6; stroke-linecap: round; filter: drop-shadow(0 0 8px rgba(34,211,238,.25)); }
.fuse-now{ stroke: rgba(255,45,141,.85); stroke-width: 2; }
.fuse-now-dot{ fill: rgba(255,45,141,.95); filter: drop-shadow(0 0 10px rgba(255,45,141,.35)); }
.fuse-now-label{ fill: rgba(255,45,141,.95); font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif; font-size: 12px; -webkit-text-stroke: 1px rgba(0,0,0,.85); }

.stream-body { margin-top: 0; height: 100%; min-height: 0; }
.stream-main { display: grid; grid-template-columns: minmax(0, 1fr) clamp(420px, 32%, 1320px); gap: 12px; min-height: 0; height: 100%; }
.stream-stage-col{ position: relative; min-height: 0; height: 100%; }
.empty-stage{
  height: 100%;
  min-height: 0;
  display: grid;
  grid-template-rows: auto 1fr;
  gap: 12px;
}
.empty-stage-system{ padding-bottom: 12px; }
.empty-stage-row{ display: flex; align-items: center; gap: 10px; }
.empty-stage-attract{
  position: relative;
  min-height: 0;
  overflow: hidden;
  display: grid;
  place-items: center;
}
.empty-stage-frame{
  width: min(1400px, 100%);
  aspect-ratio: 16 / 9;
  border: var(--stroke) solid var(--line);
  border-radius: var(--radius);
  background: linear-gradient(180deg, rgba(15,20,24,.90), rgba(11,15,18,.90));
  box-shadow: var(--shadow2), var(--shadow);
  clip-path: polygon(0% 5%, 3% 0%, 98% 0%, 100% 6%, 100% 96%, 97% 100%, 2% 100%, 0% 95%);
  overflow: hidden;
  position: relative;
}
.run-stage{
  height: 100%;
  min-height: 0;
  display: grid;
  grid-template-rows: 1.6fr 1fr;
  gap: 12px;
}
.run-stage-focus{ min-height: 0; }
.run-stage-mosaic{
  min-height: 0;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 12px;
}
.run-stage-mosaic-empty{
  border: var(--stroke) solid rgba(255,255,255,.08);
  border-radius: var(--radius);
  background: rgba(11,0,20,.30);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow2);
  clip-path: polygon(0% 5%, 3% 0%, 98% 0%, 100% 6%, 100% 96%, 97% 100%, 2% 100%, 0% 95%);
}
.hotruns{
  position: absolute;
  left: calc(var(--safe-x) + 6px);
  bottom: calc(var(--safe-y) + 6px);
  z-index: 30;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(11,0,20,.72);
  box-shadow: var(--shadow2), 0 18px 60px rgba(0,0,0,.35);
  max-width: min(920px, calc(100% - 24px));
}
.hotruns-text{
  font-size: 13px;
  font-weight: 900;
  letter-spacing: .4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: rgba(255,255,255,.92);
}
.replay-pip{
  position: absolute;
  right: calc(var(--safe-x) + 6px);
  top: calc(var(--safe-y) + 124px);
  width: min(720px, 52%);
  border: var(--stroke) solid rgba(255,255,255,.14);
  border-radius: var(--radius);
  background: linear-gradient(180deg, rgba(26,6,38,.88), rgba(18,0,26,.88));
  box-shadow: var(--shadow2), 0 24px 90px rgba(0,0,0,.55);
  overflow: hidden;
  clip-path: polygon(0% 8%, 3% 0%, 100% 0%, 100% 92%, 97% 100%, 0% 100%);
  z-index: 40;
  animation: pipIn 280ms cubic-bezier(.2,1,.2,1) 1;
  contain: layout paint;
}
@keyframes pipIn{
  0% { transform: translateY(-8px) scale(.98); opacity: 0; filter: blur(.6px); }
  100% { transform: translateY(0) scale(1); opacity: 1; filter: blur(0); }
}
.replay-pip-head{
  padding: 10px 12px;
  display: flex;
  align-items: baseline;
  gap: 10px;
  border-bottom: 1px solid rgba(255,255,255,.10);
}
.replay-pip-title{
  font-family:"Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 1px;
  font-size: 22px;
  -webkit-text-stroke: 1px rgba(0,0,0,.85);
  text-shadow: 0 3px 0 rgba(0,0,0,.90);
  color: rgba(255,255,255,.95);
}
.replay-pip-media{ position: relative; aspect-ratio: 16 / 9; background: rgba(0,0,0,.55); }
.replay-pip-video{ width: 100%; height: 100%; object-fit: cover; display: block; }
.replay-pip-overlay{
  position: absolute;
  left: 10px;
  right: 10px;
  bottom: 10px;
  display: flex;
  justify-content: space-between;
  pointer-events: none;
}
.replay-pip-why{
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(6px);
  font-size: 12px;
  font-weight: 900;
  letter-spacing: .3px;
  color: rgba(255,255,255,.92);
  text-transform: uppercase;
}
.stream-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 12px;
  min-height: 0;
}
.stream-tile-quad{ min-height: 0; }
.stream-grid-dominant{
  display: grid;
  grid-template-rows: 1.25fr 0.75fr;
  gap: 12px;
  min-height: 0;
}
.stream-grid-bottom3{
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
  min-height: 0;
}
.stream-tile-top{ min-height: 0; }
.stream-tile {
  border: var(--stroke) solid var(--line);
  border-radius: var(--radius);
  background: linear-gradient(180deg, rgba(15,20,24,.90), rgba(11,15,18,.90));
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0;
  box-shadow: var(--shadow2), var(--shadow);
  clip-path: polygon(0% 5%, 3% 0%, 98% 0%, 100% 6%, 100% 96%, 97% 100%, 2% 100%, 0% 95%);
  overflow: hidden;
}
.stream-tile-idle{
  position: relative;
  overflow: hidden;
}
.stream-idle-content{
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
  opacity: .9;
}
.stream-idle-overlay{
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  z-index: 3;
}
.stream-tile-idle .stream-tile-feed:before{
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(to bottom, rgba(255,255,255,.03), rgba(255,255,255,.03) 1px, transparent 2px, transparent 4px);
  opacity: .12;
  mix-blend-mode: overlay;
  pointer-events: none;
}
.run-stage-idle .run-stage-mosaic .stream-tile-idle{
  opacity: .68;
}
.stream-tile-nofeed{
  box-shadow: 0 0 0 2px rgba(255,255,255,.10), var(--shadow2), var(--shadow);
  opacity: .92;
}
.stream-tile-nofeed .stream-tile-feed{ background: rgba(5,7,9,.78); filter: saturate(.65) brightness(.92); }
.stream-tile-nofeed .stream-overlay-top{ opacity: .85; }
.stream-tile-nofeed .stream-overlay-bottom{ display: none; }
.stream-ov-nofeed{ margin-top: 8px; }
.stream-ov-statuschip{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(6px);
  box-shadow: 0 0 0 2px rgba(0,0,0,.62);
}
.stream-ov-statuschip-text{
  font-weight: 900;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  color: rgba(255,255,255,.92);
  max-width: 360px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.stream-tile-role{
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 2;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 900;
  letter-spacing: .6px;
  text-transform: uppercase;
  background: rgba(0,229,255,.18);
  border: 1px solid rgba(0,229,255,.4);
  color: rgba(255,255,255,.92);
  box-shadow: 0 0 0 1px rgba(0,0,0,.7) inset;
}
.stream-tile-focused{
  box-shadow:
    0 0 0 2px rgba(0,229,255,.30),
    0 0 36px rgba(0,229,255,.14),
    var(--shadow2),
    var(--shadow);
}
.stream-tile-featured{ grid-column: 1; grid-row: 1 / span 2; }
.stream-tile-a{ grid-column: 2; grid-row: 1; }
.stream-tile-b{ grid-column: 2; grid-row: 2; }
.stream-tile-wide{ grid-column: 1 / span 2; grid-row: 3; }
.stream-tile-head { display: flex; align-items: baseline; justify-content: space-between; gap: 12px; }
.stream-tile-name { font-weight: 800; font-size: 16px; }
.stream-tile-name{
  font-family:"Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-weight:400;
  letter-spacing: .9px;
  text-transform: uppercase;
  -webkit-text-stroke: 1px rgba(0,0,0,.75);
  text-shadow: 0 2px 0 rgba(0,0,0,.85);
}
.stream-tile-policy { color: #97a4ad; font-size: 12px; }
.stream-tile-metrics { display: flex; gap: 10px; }
.stream-metric {
  background: rgba(26,6,38,.92);
  border: var(--stroke) solid var(--line);
  border-radius: 12px;
  padding: 8px 10px;
  min-width: 120px;
  box-shadow: var(--shadow2);
  clip-path: polygon(0% 10%, 4% 0%, 100% 0%, 100% 88%, 96% 100%, 0% 100%);
}
.stream-metric-value {
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-weight: 400;
  font-size: 22px;
  letter-spacing: 1px;
  -webkit-text-stroke: 1px rgba(0,0,0,.85);
  text-shadow: 0 3px 0 rgba(0,0,0,.85);
  animation: valueBounce 320ms cubic-bezier(.15,1.1,.2,1) 1;
}
.stream-tile-feed { flex: 1; border: 0; border-radius: var(--radius); background: rgba(5,7,9,.9); padding: 0; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
.stream-img { width: 100%; height: 100%; object-fit: cover; display: block; }
.mse-wrap { width: 100%; height: 100%; position: relative; }
.mse-overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; pointer-events: none; transition: opacity 260ms ease; }
.mse-overlay-inner { padding: 14px 16px; border-radius: 14px; background: rgba(0,0,0,.55); border: 1px solid rgba(255,255,255,.08); backdrop-filter: blur(6px); max-width: 90%; text-align: center; }
.mse-overlay-title { font-weight: 900; letter-spacing: .08em; font-size: 12px; }
.mse-overlay-sub { margin-top: 6px; font-size: 12px; line-height: 1.25; }
.mse-overlay-debug{ margin-top: 6px; font-size: 11px; opacity: .7; }
.stream-overlay-top{
  position: absolute;
  inset: 10px 10px auto 10px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  pointer-events: none;
}
.stream-ov-left{ display: flex; flex-direction: column; gap: 6px; min-width: 0; }
.stream-ov-name{
  display: flex;
  align-items: center;
  gap: 8px;
  font-family:"Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-weight:400;
  letter-spacing: .9px;
  text-transform: uppercase;
  font-size: clamp(var(--hMin), 1.5vw, 36px);
  -webkit-text-stroke: 1px rgba(0,0,0,.78);
  text-shadow: 0 3px 0 rgba(0,0,0,.9);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.stream-ov-name-text{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.stream-ov-persona{
  width: 26px;
  height: 26px;
  display: grid;
  place-items: center;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(11,0,20,.65);
  box-shadow: 0 0 0 2px rgba(0,0,0,.65);
}
.stream-ov-sub{ display: inline-flex; gap: 8px; flex-wrap: wrap; align-items: center; }
.stream-ov-pill{
  font-size: 12px;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(11,0,20,.72);
  backdrop-filter: blur(6px);
  color: rgba(255,255,255,.92);
  box-shadow: var(--shadow2);
}
.stream-ov-strip{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
  max-width: 820px;
}
.stream-ov-alerts{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}
.stream-ov-iconpill{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 3px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(11,0,20,.70);
  backdrop-filter: blur(6px);
  box-shadow: var(--shadow2);
  color: rgba(255,255,255,.92);
  font-size: clamp(var(--microMin), 0.9vw, var(--microMax));
  font-weight: 900;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  min-height: 22px;
}
.stream-ov-iconpill.compact{
  padding: 3px 6px;
}
.stream-ov-iconpill.danger{
  background: rgba(255,68,68,.16);
  border-color: rgba(255,68,68,.45);
  color: rgba(255,255,255,.95);
}
.stream-ov-icon{
  width: 16px;
  height: 16px;
  display: grid;
  place-items: center;
  font-family:"Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 0.6px;
  -webkit-text-stroke: 1px rgba(0,0,0,.82);
  text-shadow: 0 2px 0 rgba(0,0,0,.88);
}
.stream-ov-label{
  max-width: 240px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: rgba(255,255,255,.90);
}
.delta-pos{ color: rgba(0,229,255,.95); }
.delta-neg{ color: rgba(255,45,141,.95); }
.numeric{ font-variant-numeric: tabular-nums; }
.stream-ov-flag{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(11,0,20,.54);
  box-shadow: 0 0 0 2px rgba(0,0,0,.62);
  color: rgba(255,255,255,.86);
  min-height: 20px;
}
.stream-ov-flag.compact{ padding: 2px 5px; }
.stream-ov-flag.danger{
  border-color: rgba(255,68,68,.45);
  background: rgba(255,68,68,.14);
}
.stream-ov-flag-label{
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 13px;
  font-weight: 900;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}
.stream-ov-right{
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
}
.stream-ov-pills{
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: flex-end;
  max-width: 640px;
}
.stream-ov-score{
  font-family:"Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-size: 28px;
  letter-spacing: 1px;
  -webkit-text-stroke: 1px rgba(0,0,0,.85);
  text-shadow: 0 4px 0 rgba(0,0,0,.9);
  padding: 2px 10px;
  border-radius: 12px;
  background: rgba(26,6,38,.82);
  border: 1px solid rgba(255,255,255,.16);
  box-shadow: var(--shadow2);
}
.stream-ov-kpi{ font-size: 14px; color: rgba(255,255,255,.86); }

.stream-rank-burst{
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 6;
  pointer-events: none;
  padding: 6px 10px;
  border-radius: 14px;
  border: 1px solid rgba(0,229,255,.55);
  background: rgba(0,229,255,.14);
  color: rgba(255,255,255,.96);
  font-family:"Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 1px;
  font-size: 18px;
  -webkit-text-stroke: 1px rgba(0,0,0,.88);
  text-shadow: 0 3px 0 rgba(0,0,0,.92);
  box-shadow: var(--shadow2), 0 0 22px rgba(0,229,255,.12);
  clip-path: polygon(0% 20%, 6% 0%, 100% 0%, 100% 85%, 94% 100%, 0% 100%);
  animation: rankBurst var(--durSwap) var(--easeUI) 1;
}
@keyframes rankBurst{
  0% { transform: translateY(-8px) scale(.92) rotate(-2deg); opacity: 0; filter: blur(.6px); }
  18% { opacity: 1; filter: blur(0); }
  65% { transform: translateY(0) scale(1.03) rotate(1deg); opacity: 1; }
  100% { transform: translateY(-14px) scale(1.12) rotate(2deg); opacity: 0; }
}
@keyframes rankClimb{
  0% { transform: translateY(0); box-shadow: inset 0 0 0 0 rgba(0,229,255,.4); }
  35% { transform: translateY(-2px); box-shadow: inset 0 0 0 2px rgba(0,229,255,.5); }
  100% { transform: translateY(0); box-shadow: inset 0 0 0 0 rgba(0,229,255,0); }
}
.rank-callout{
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid rgba(0,229,255,.55);
  background: rgba(0,229,255,.14);
  color: rgba(255,255,255,.95);
  font-weight: 900;
  font-size: 11px;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  box-shadow: 0 0 0 2px rgba(0,0,0,.62);
}

.iconpill{
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(11,0,20,.70);
  backdrop-filter: blur(6px);
  box-shadow: var(--shadow2);
  color: rgba(255,255,255,.92);
  min-height: 30px;
}
.iconpill-icon{
  width: 18px;
  height: 18px;
  display: grid;
  place-items: center;
  font-size: 16px;
  filter: drop-shadow(0 2px 0 rgba(0,0,0,.75));
}
.iconpill-body{ display: flex; flex-direction: column; gap: 2px; }
.iconpill-value{
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-weight: 400;
  letter-spacing: 0.8px;
  font-size: 18px;
  line-height: 1;
  color: var(--ip-accent, rgba(255,255,255,.92));
  -webkit-text-stroke: 1px rgba(0,0,0,.82);
  text-shadow: 0 2px 0 rgba(0,0,0,.88);
}
.iconpill-sub{
  font-size: 12px;
  color: rgba(255,255,255,.78);
  line-height: 1;
}
.iconpill-badge{
  position: absolute;
  top: -7px;
  right: -7px;
  min-width: 18px;
  height: 18px;
  padding: 0 6px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: 0.4px;
  color: #0b0014;
  background: var(--yellow);
  border: 2px solid rgba(0,0,0,.85);
  box-shadow: 0 6px 18px rgba(0,0,0,.55);
}
.stream-overlay-bottom{
  position: absolute;
  inset: auto 10px 10px 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  pointer-events: none;
}
.stream-progress{
  width: 100%;
  display: grid;
  gap: 6px;
}
.stream-progress-track{
  height: 14px;
  border: var(--stroke) solid rgba(255,255,255,.14);
  background: rgba(11,0,20,.70);
  overflow: hidden;
  box-shadow: var(--shadow2);
  border-radius: 999px;
}
.stream-progress-fill{ height: 100%; width: 0%; transition: width 180ms linear; }
.stream-progress-meta{
  font-size: 12px;
  color: rgba(255,255,255,.86);
  text-align: center;
}
.stream-status-band{
  height: 14px;
  border: var(--stroke) solid rgba(255,255,255,.14);
  background: rgba(11,0,20,.70);
  overflow: hidden;
  box-shadow: var(--shadow2);
  border-radius: 999px;
}
.stream-status-fill{ height: 100%; width: 0%; transition: width 180ms linear; }
.stream-spark{
  width: 120px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(11,0,20,.66);
  overflow: hidden;
  box-shadow: var(--shadow2);
}
.stream-dangerbar {
  height: 12px;
  border: var(--stroke) solid var(--line);
  background: rgba(26,6,38,.92);
  overflow: hidden;
  box-shadow: var(--shadow2);
  /* jagged lightning bolt */
  clip-path: polygon(
    0% 0%, 6% 55%, 12% 0%, 18% 55%, 24% 0%, 30% 55%, 36% 0%, 42% 55%, 48% 0%,
    54% 55%, 60% 0%, 66% 55%, 72% 0%, 78% 55%, 84% 0%, 90% 55%, 96% 0%,
    100% 0%, 100% 100%, 0% 100%
  );
}
.stream-dangerbar-fill { height: 100%; width: 0%; transition: width 200ms linear; }

.stream-root-overrun .stream-top {
  box-shadow: 0 0 0 2px rgba(255, 68, 68, 0.35), 0 0 36px rgba(255, 68, 68, 0.18);
  animation: overrunPulse 900ms ease-in-out infinite;
}
.stream-tile-overrun {
  animation: overrunPulse 900ms ease-in-out infinite;
  box-shadow: 0 0 0 2px rgba(255, 68, 68, 0.40), 0 0 44px rgba(255, 68, 68, 0.18);
}
@keyframes overrunPulse {
  0% { filter: saturate(1); }
  50% { filter: saturate(1.35); }
  100% { filter: saturate(1); }
}

.dps-box {
  border: 1px solid #1b1f22;
  background: #0b0f12;
  border-radius: 12px;
  padding: 10px 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.dps-box{
  border: var(--stroke) solid var(--line);
  background: linear-gradient(180deg, rgba(26,6,38,.88), rgba(18,0,26,.88));
  border-radius: var(--radius);
  clip-path: polygon(0% 10%, 4% 0%, 100% 0%, 100% 90%, 96% 100%, 0% 100%);
  box-shadow: var(--shadow2);
}
.dps-row {
  display: flex;
  justify-content: space-between;
  gap: 10px;
}
.dps-val { font-weight: 800; }
.dps-bars { display: flex; align-items: center; gap: 8px; }
.dps-bar {
  flex: 1;
  height: 10px;
  border-radius: 999px;
  background: #0f1418;
  border: 1px solid #1b1f22;
  overflow: hidden;
}
.dps-bar-fill { height: 100%; width: 0%; transition: width 220ms linear; }
.dps-pressure { min-width: 64px; text-align: right; }

.swarm-wave { width: 100%; height: 44px; border-radius: 10px; background: #050709; border: 1px dashed #1b1f22; }
.swarm-wave{
  border-radius: var(--radius);
  background: rgba(11,0,20,.85);
  border: var(--stroke) dashed var(--line);
  box-shadow: var(--shadow2);
  clip-path: polygon(0% 10%, 4% 0%, 100% 0%, 100% 90%, 96% 100%, 0% 100%);
}
.overrun-pill {
  align-self: flex-start;
  padding: 2px 8px;
  border-radius: 999px;
  font-weight: 900;
  letter-spacing: 0.6px;
  background: rgba(255, 68, 68, 0.15);
  border: 1px solid rgba(255, 68, 68, 0.45);
  color: #ff4444;
}

.build-box {
  border: 1px solid #1b1f22;
  background: #0b0f12;
  border-radius: 12px;
  padding: 10px 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.build-box{
  border: var(--stroke) solid var(--line);
  background: linear-gradient(180deg, rgba(26,6,38,.88), rgba(18,0,26,.88));
  border-radius: var(--radius);
  clip-path: polygon(0% 10%, 4% 0%, 100% 0%, 100% 90%, 96% 100%, 0% 100%);
  box-shadow: var(--shadow2);
}
.inv-pills { display: flex; flex-wrap: wrap; gap: 6px; }
.inv-pill {
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(0,229,255,.35);
  background: rgba(0,229,255,.08);
  color: var(--ink);
  font-size: 12px;
  font-weight: 700;
  clip-path: polygon(0% 20%, 6% 0%, 100% 0%, 98% 100%, 10% 100%, 0% 70%);
}
.synergy-graph {
  width: 100%;
  height: 140px;
  border-radius: 12px;
  background: #050709;
  border: 1px dashed #1b1f22;
}
.synergy-edge { stroke: #7dd3fc; }
.synergy-edge.pulse { animation: synergyPulse 800ms ease-in-out infinite; }
@keyframes synergyPulse {
  0% { opacity: 0.35; }
  50% { opacity: 1.0; }
  100% { opacity: 0.35; }
}
.synergy-node { fill: #00ff88; stroke: #0b0f12; stroke-width: 2; }
.synergy-label { fill: #b9c1c7; font-size: 10px; font-weight: 700; }
.buildlab-tree { height: 100%; min-height: 520px; width: 100%; position: relative; }
.buildlab-tree-svg { width: 100%; height: 100%; overflow: visible; }
.tree-ring { fill: none; stroke: rgba(255,255,255,.08); stroke-dasharray: 4 8; }
.tree-link { stroke: rgba(255,255,255,.16); stroke-width: 1; }
.tree-xlink { fill: none; stroke-width: 1.2; opacity: 0.35; }
.tree-node { cursor: pointer; }
.tree-node.active circle { stroke: rgba(0,229,255,.9); stroke-width: 3; }
.tree-label { fill: rgba(255,255,255,.9); font-size: 11px; font-weight: 800; text-anchor: middle; paint-order: stroke; stroke: rgba(0,0,0,.75); stroke-width: 3px; }
.tree-label-root { font-size: 12px; letter-spacing: 1px; }

.recipes { display: flex; flex-direction: column; gap: 8px; }
.recipe { border: 1px solid #1b1f22; border-radius: 10px; padding: 8px 10px; background: #0f1418; }
.recipe{
  border: var(--stroke) solid var(--line);
  background: rgba(11,0,20,.85);
  border-radius: var(--radius);
  clip-path: polygon(0% 12%, 5% 0%, 100% 0%, 100% 88%, 95% 100%, 0% 100%);
}
.recipe-title { display: flex; justify-content: space-between; gap: 10px; }
.recipe-weapon { font-weight: 900; letter-spacing: 0.4px; }
.recipe-reqs { margin-top: 6px; display: flex; flex-wrap: wrap; gap: 6px; }
.recipe-req {
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
  border: 1px solid #1b1f22;
}
.recipe-req.need { color: #97a4ad; background: #0b0f12; border-style: dashed; }
.recipe-req.have { color: #00ff88; background: rgba(0,255,136,0.10); border-color: rgba(0,255,136,0.30); }
.recipe-req.need { color: var(--muted); background: rgba(26,6,38,.75); border-color: rgba(255,230,0,.25); }
.recipe-req.have { color: var(--good); background: rgba(0,255,136,.10); border-color: rgba(0,255,136,.35); }

.impact-frame {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: rgba(255, 255, 255, 0.18);
  mix-blend-mode: difference;
  animation: impactFlash 120ms ease-out 1;
  z-index: 9999;
}

.juice-invert{
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: rgba(255,255,255,.20);
  mix-blend-mode: difference;
  animation: impactFlash 140ms ease-out 1;
  z-index: 9998;
}
.juice-lines{
  position: fixed;
  inset: -30%;
  pointer-events: none;
  background:
    repeating-linear-gradient(115deg,
      rgba(255,230,0,.00) 0px,
      rgba(255,230,0,.00) 10px,
      rgba(255,230,0,.22) 12px,
      rgba(255,230,0,.00) 18px),
    repeating-linear-gradient(295deg,
      rgba(0,229,255,.00) 0px,
      rgba(0,229,255,.00) 12px,
      rgba(0,229,255,.18) 14px,
      rgba(0,229,255,.00) 20px);
  mix-blend-mode: screen;
  transform: rotate(-6deg);
  animation: speedLines 520ms linear 1;
  opacity: .9;
  z-index: 9997;
}
@keyframes speedLines{
  0% { transform: translateX(-6%) translateY(-2%) rotate(-6deg); opacity: 0; }
  15% { opacity: 1; }
  100% { transform: translateX(8%) translateY(4%) rotate(-6deg); opacity: 0; }
}

.juice-shake{
  transform-origin: 50% 30%;
  animation: panelShake 360ms cubic-bezier(.2,1,.2,1) 1;
}
@keyframes panelShake{
  0% { transform: translate(0,0) rotate(0deg); }
  12% { transform: translate(-2px, 1px) rotate(-0.6deg); }
  26% { transform: translate(3px, -2px) rotate(0.8deg); }
  40% { transform: translate(-3px, 2px) rotate(-0.8deg); }
  55% { transform: translate(2px, 1px) rotate(0.5deg); }
  70% { transform: translate(-1px, -1px) rotate(-0.3deg); }
  100% { transform: translate(0,0) rotate(0deg); }
}

/* Arcade Attract Mode */
.attract-root{
  position: absolute;
  inset: 0;
  z-index: 10;
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
}
.attract-root-fullscreen{
  position: fixed;
  inset: 0;
  z-index: 9996;
}
.attract-ui{
  width: min(1100px, 94%);
  background: rgba(11,0,20,.72);
  border: var(--stroke) solid rgba(255,255,255,.12);
  box-shadow: var(--shadow2), 0 24px 80px rgba(0,0,0,.75);
  border-radius: var(--radius);
  padding: 18px 18px 14px;
  clip-path: polygon(0% 8%, 2.5% 0%, 100% 0%, 100% 92%, 97.5% 100%, 0% 100%);
  backdrop-filter: blur(8px);
}
.attract-title{
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-size: 74px;
  letter-spacing: 2px;
  color: var(--yellow);
  -webkit-text-stroke: 3px rgba(0,0,0,.92);
  text-shadow: 0 6px 0 rgba(0,0,0,.92), 0 0 36px rgba(255,230,0,.22);
  line-height: 0.95;
}
.attract-sub{
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: rgba(255,255,255,.85);
  margin-top: 2px;
}
.insert-coin{
  margin-top: 10px;
  display: inline-block;
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-size: 28px;
  letter-spacing: 2px;
  color: var(--pink);
  -webkit-text-stroke: 2px rgba(0,0,0,.92);
  text-shadow: 0 4px 0 rgba(0,0,0,.92);
  animation: insertCoin 900ms steps(2, end) infinite;
}
@keyframes insertCoin{
  0% { opacity: 0; transform: rotate(-2deg) translateY(0); }
  50% { opacity: 1; transform: rotate(2deg) translateY(-2px); }
  100% { opacity: 0; transform: rotate(-2deg) translateY(0); }
}
.attract-panels{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  margin-top: 14px;
}
.attract-panel{
  border: var(--stroke) solid rgba(255,255,255,.10);
  background: linear-gradient(180deg, rgba(26,6,38,.88), rgba(18,0,26,.88));
  border-radius: var(--radius);
  padding: 12px;
  clip-path: polygon(0% 10%, 4% 0%, 100% 0%, 100% 90%, 96% 100%, 0% 100%);
}
.attract-clip{
  width: 100%;
  height: 220px;
  object-fit: cover;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(0,0,0,.55);
  box-shadow: 0 0 0 2px rgba(0,0,0,.65), 0 18px 50px rgba(0,0,0,.55);
}
.attract-clip-meta{
  margin-top: 8px;
  display:flex;
  align-items:center;
  gap:10px;
  flex-wrap:wrap;
}
.attract-panel-head{
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 1.4px;
  font-size: 22px;
  color: var(--blue);
  -webkit-text-stroke: 1px rgba(0,0,0,.88);
  text-shadow: 0 3px 0 rgba(0,0,0,.92);
  margin-bottom: 8px;
}
.attract-entry-title{
  font-weight: 900;
  letter-spacing: 0.6px;
  color: rgba(255,255,255,.95);
}
.attract-entry-meta{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:6px;
}
.attract-list{ margin-top: 10px; display:flex; flex-direction:column; gap:6px; }
.attract-row{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:10px;
  padding:6px 8px;
  border: 1px dashed rgba(255,255,255,.10);
  border-radius: 12px;
  background: rgba(11,0,20,.55);
}
.attract-row-title{ font-weight: 800; }
.attract-row-score{
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 1px;
  -webkit-text-stroke: 1px rgba(0,0,0,.85);
}

/* CRT */
.attract-crt{
  position:absolute;
  inset:0;
  border-radius: 18px;
  pointer-events:none;
  background:
    radial-gradient(120% 100% at 50% 50%, rgba(255,255,255,.10), rgba(0,0,0,.15) 55%, rgba(0,0,0,.50) 100%);
  transform: perspective(900px) rotateX(2deg) rotateY(-2deg);
  opacity: .55;
}
.attract-scanlines{
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(0,0,0,0.0) 0px,
      rgba(0,0,0,0.0) 2px,
      rgba(0,0,0,0.22) 3px
    );
  mix-blend-mode: multiply;
  opacity: .55;
}

@keyframes valueSlam {
  0% { transform: translateY(-6px) rotate(-2deg) scale(.92); filter: blur(.6px); opacity: .75; }
  60% { transform: translateY(2px) rotate(1deg) scale(1.07); filter: blur(0); opacity: 1; }
  100% { transform: translateY(0) rotate(0deg) scale(1); }
}
@keyframes valueBounce {
  0% { transform: translateY(-4px) rotate(-1deg) scale(.95); opacity: .8; }
  55% { transform: translateY(2px) rotate(1deg) scale(1.08); opacity: 1; }
  100% { transform: translateY(0) rotate(0deg) scale(1); }
}

@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
  body::before { opacity: .18; }
}
@keyframes impactFlash {
  0% { opacity: 0; }
  25% { opacity: 1; }
  100% { opacity: 0; }
}

.stream-tile-impact {
  box-shadow: 0 0 0 2px rgba(255, 68, 68, 0.65), 0 0 32px rgba(255, 68, 68, 0.25);
}

.bonk-pop {
  position: absolute;
  top: var(--safe-y);
  left: var(--safe-x);
  right: var(--safe-x);
  pointer-events: none;
  font-weight: 900;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  color: #ff4444;
  -webkit-text-stroke: 2px #050709;
  text-shadow: 0 8px 24px rgba(0,0,0,0.6);
  transform-origin: center;
  animation: bonkPop 900ms cubic-bezier(0.2, 1.0, 0.2, 1.0) 1;
}
@keyframes bonkPop {
  0% { transform: scale(0.7) rotate(-6deg); opacity: 0; filter: blur(1px); }
  18% { transform: scale(1.15) rotate(2deg); opacity: 1; filter: blur(0); }
  60% { transform: scale(1.05) rotate(0deg); opacity: 1; }
  100% { transform: scale(1.35) translateY(-20px) rotate(4deg); opacity: 0; }
}

.moment-card{
  position: absolute;
  left: var(--safe-x);
  top: calc(var(--safe-y) + 72px);
  z-index: 9995;
  width: 420px;
  pointer-events: none;
  border: var(--stroke) solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(26,6,38,.90), rgba(18,0,26,.88));
  border-radius: var(--radius);
  padding: 10px 12px;
  box-shadow: var(--shadow2), 0 22px 70px rgba(0,0,0,.55);
  clip-path: polygon(0% 10%, 5% 0%, 100% 0%, 100% 90%, 95% 100%, 0% 100%);
  animation: momentIn 420ms cubic-bezier(.2,1,.2,1) 1;
}
.moment-head{
  display:flex;
  align-items:center;
  gap:10px;
}
.moment-title{
  font-family:"Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 1.2px;
  font-size: 20px;
  color: rgba(255,255,255,.95);
  -webkit-text-stroke: 1px rgba(0,0,0,.85);
  text-shadow: 0 3px 0 rgba(0,0,0,.90);
}
.moment-sub{ margin-top: 4px; font-size: 12px; }
@keyframes momentIn{
  0% { transform: translateY(-10px) scale(.94); opacity: 0; filter: blur(.6px); }
  100% { transform: translateY(0) scale(1); opacity: 1; filter: blur(0); }
}

.stream-subrow {
  display: flex;
  gap: 10px;
  align-items: stretch;
}
.stream-crit-tier {
  border: 1px solid #1b1f22;
  border-radius: 10px;
  padding: 8px 10px;
  min-width: 120px;
  font-weight: 900;
  letter-spacing: 0.6px;
  text-transform: uppercase;
  background: #0f1418;
}
.stream-bignum {
  flex: 1;
  border: 1px solid #1b1f22;
  border-radius: 10px;
  padding: 8px 10px;
  background: #0f1418;
  position: relative;
  overflow: hidden;
}
.stream-bignum-value {
  font-size: 18px;
  font-weight: 900;
  letter-spacing: 0.4px;
  animation: none;
}
.stream-bignum-value {
  animation: slotSpin 650ms ease-out 1;
}
@keyframes slotSpin {
  0% { transform: translateY(-10px); filter: blur(2px); opacity: 0.6; }
  30% { transform: translateY(10px); filter: blur(1px); opacity: 0.9; }
  100% { transform: translateY(0); filter: blur(0); opacity: 1; }
}

.stream-confetti {
  position: absolute;
  inset: -20px;
  pointer-events: none;
  opacity: 0;
}
.stream-bignum-value + .stream-confetti {
  opacity: 1;
  animation: confettiPop 650ms ease-out 1;
}
@keyframes confettiPop {
  0% { transform: scale(0.9); opacity: 0; }
  25% { opacity: 1; }
  100% { transform: scale(1.1); opacity: 0; }
}
.stream-confetti::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,68,68,0.9) 0 3px, transparent 4px),
    radial-gradient(circle at 75% 25%, rgba(0,255,136,0.9) 0 3px, transparent 4px),
    radial-gradient(circle at 60% 70%, rgba(255,215,0,0.9) 0 3px, transparent 4px),
    radial-gradient(circle at 35% 75%, rgba(125,211,252,0.9) 0 3px, transparent 4px),
    radial-gradient(circle at 50% 45%, rgba(255,136,255,0.9) 0 3px, transparent 4px);
}

.stream-rail { display: flex; flex-direction: column; gap: 12px; min-height: 0; }
.stream-rail-fixed { display: flex; flex-direction: column; gap: 12px; }
.stream-leaderboard-card{ flex: 1; min-height: 0; display: flex; flex-direction: column; }
.stream-leaderboard-card .lb-table{ flex: 1; min-height: 0; overflow: hidden; }
.lb-afford{
  display: inline-flex;
  align-items: center;
  padding: 2px 6px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(11,0,20,.55);
  font-size: 10px;
  font-weight: 900;
  letter-spacing: .4px;
  text-transform: uppercase;
  color: rgba(255,255,255,.90);
}
.lb-live{ border-color: rgba(0,229,255,.55); background: rgba(0,229,255,.10); }
.lb-hunt{ border-color: rgba(255,214,10,.55); background: rgba(255,214,10,.10); }
.stream-tabs { min-height: 0; display: flex; flex-direction: column; gap: 8px; }
.stream-tabbar{
  display: flex;
  gap: 8px;
  align-items: center;
  padding: 8px;
  border: var(--stroke) solid var(--line);
  border-radius: var(--radius);
  background: rgba(11,0,20,.70);
  box-shadow: var(--shadow2);
}
.stream-tablabel{
  display: inline-flex;
  align-items: center;
  gap: 0;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(11,0,20,.45);
  font-size: 12px;
  color: rgba(255,255,255,.8);
  justify-content: center;
  width: 44px;
}
.stream-tablabel.active{
  background: rgba(0,229,255,.18);
  border-color: rgba(0,229,255,.45);
  color: rgba(255,255,255,.95);
}
.stream-tabbtn{
  appearance: none;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(26,6,38,.80);
  color: rgba(255,255,255,.86);
  border-radius: 999px;
  padding: 6px 10px;
  font-weight: 900;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  font-size: 12px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.stream-tabbtn.active{
  background: rgba(0,229,255,.18);
  border-color: rgba(0,229,255,.45);
  color: rgba(255,255,255,.95);
}
.tab-ico{ opacity: .95; transform: translateY(-0.5px); }
.stream-tabpanel{ min-height: 0; flex: 1; overflow: auto; }
.stream-card {
  border: var(--stroke) solid var(--line);
  background: linear-gradient(180deg, rgba(26,6,38,.88), rgba(18,0,26,.88));
  border-radius: var(--radius);
  padding: 12px;
  clip-path: polygon(0% 10%, 4% 0%, 100% 0%, 100% 90%, 96% 100%, 0% 100%);
  box-shadow: var(--shadow2);
}
.stream-card-title {
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  font-weight: 400;
  letter-spacing: 1.2px;
  font-size: clamp(var(--hMin), 1.2vw, 30px);
  margin-bottom: 8px;
  color: var(--yellow);
  -webkit-text-stroke: 1px rgba(0,0,0,.88);
  text-shadow: 0 3px 0 rgba(0,0,0,.92);
}
.stream-highlight{
  position: relative;
  overflow: hidden;
  contain: layout paint;
}
.stream-highlight-pulse{
  animation: highlightPulse 1600ms cubic-bezier(.2,1,.2,1) 1;
}
.stream-highlight-media{
  position: relative;
  contain: layout paint;
}
.stream-highlight-video{
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 12px;
  display: block;
  object-fit: cover;
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.6);
}
.stream-highlight-placeholder{
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 12px;
  display: grid;
  place-items: center;
  background: rgba(5,7,9,.85);
  border: 1px dashed rgba(255,255,255,.16);
  color: rgba(255,255,255,.7);
  font-size: 12px;
}
.stream-replay-overlay{
  position: absolute;
  inset: 8px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  pointer-events: none;
}
.stream-replay-top{
  display: flex;
  justify-content: flex-start;
}
.stream-replay-name{
  padding: 4px 8px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(11,0,20,.65);
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 0.8px;
  font-size: 18px;
  -webkit-text-stroke: 1px rgba(0,0,0,.7);
  text-shadow: 0 2px 0 rgba(0,0,0,.85);
}
.stream-replay-bottom{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}
.stream-replay-left,
.stream-replay-right{
  padding: 4px 8px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(11,0,20,.65);
  font-size: 14px;
  font-weight: 800;
  letter-spacing: 0.4px;
  text-transform: uppercase;
}
.stream-replay-right{ display: inline-flex; align-items: center; gap: 6px; }
@keyframes highlightPulse{
  0% { transform: translateY(-2px) scale(.995); box-shadow: 0 0 0 0 rgba(255,214,10,.55); }
  40% { transform: translateY(0) scale(1.01); box-shadow: 0 0 0 6px rgba(255,214,10,.35), 0 0 24px rgba(255,214,10,.25); }
  100% { transform: translateY(0) scale(1); box-shadow: var(--shadow2); }
}
.stream-events { display: flex; flex-direction: column; gap: 8px; max-height: 260px; overflow: auto; }
.stream-event { display: flex; align-items: center; gap: 8px; padding: 6px 0; border-bottom: 1px dashed #1b1f22; }
.stream-event-ico{
  width: 20px;
  height: 20px;
  display: grid;
  place-items: center;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(11,0,20,.55);
  box-shadow: 0 0 0 2px rgba(0,0,0,.62);
}
.progress-card{ display: flex; flex-direction: column; gap: 10px; }
.progress-summary{ display: flex; flex-direction: column; gap: 8px; }
.progress-summary-row{
  display: grid;
  grid-template-columns: 60px 48px 1fr 42px;
  gap: 6px;
  align-items: center;
}
.progress-pill{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border: 1px solid rgba(255,255,255,.18);
}
.progress-pill.minor{ background: rgba(0,229,255,.12); color: rgba(255,255,255,.9); }
.progress-pill.major{ background: rgba(255,45,141,.14); color: rgba(255,255,255,.9); }
.progress-count{ font-weight: 800; font-size: 12px; color: rgba(255,255,255,.9); }
.progress-bar{
  height: 8px;
  border-radius: 999px;
  background: rgba(255,255,255,.08);
  border: 1px solid rgba(255,255,255,.12);
  overflow: hidden;
}
.progress-bar-fill{ height: 100%; border-radius: 999px; }
.progress-bar-fill.minor{ background: linear-gradient(90deg, rgba(0,229,255,.8), rgba(34,211,238,.6)); }
.progress-bar-fill.major{ background: linear-gradient(90deg, rgba(255,45,141,.8), rgba(255,125,45,.6)); }
.progress-pct{ font-size: 12px; color: rgba(255,255,255,.75); text-align: right; }
.progress-total{
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 8px;
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 10px;
  background: rgba(11,0,20,.55);
  font-weight: 800;
}
.progress-total-num{ font-size: 13px; }
.progress-controls{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}
.progress-toggle{ display: inline-flex; gap: 6px; }
.progress-btn{
  appearance: none;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(26,6,38,.7);
  color: rgba(255,255,255,.8);
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  font-weight: 800;
  cursor: pointer;
}
.progress-btn.active{
  background: rgba(0,229,255,.16);
  border-color: rgba(0,229,255,.45);
  color: rgba(255,255,255,.95);
}
.progress-checkbox{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: rgba(255,255,255,.8);
}
.progress-checkbox input{ accent-color: #22d3ee; }
.progress-search{
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 8px;
  align-items: center;
}
.progress-input{
  background: rgba(8,2,12,.7);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 10px;
  padding: 6px 10px;
  color: rgba(255,255,255,.92);
  font-size: 12px;
}
.progress-action{
  appearance: none;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(0,229,255,.14);
  color: rgba(255,255,255,.9);
  border-radius: 10px;
  padding: 6px 10px;
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  cursor: pointer;
}
.progress-action.danger{
  background: rgba(255,45,141,.18);
  border-color: rgba(255,45,141,.45);
}
.progress-flash{ min-height: 16px; font-size: 12px; color: rgba(255,255,255,.7); }
.progress-list{
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 360px;
  overflow: auto;
  padding-right: 6px;
}
.progress-item{
  display: grid;
  grid-template-columns: 18px 1fr;
  gap: 8px;
  align-items: start;
  padding: 6px 8px;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 10px;
  background: rgba(10,2,16,.5);
  cursor: pointer;
}
.progress-item input{ margin-top: 2px; accent-color: #00e5ff; }
.progress-item.done{
  border-color: rgba(0,255,136,.35);
  background: rgba(0,255,136,.08);
}
.progress-title{
  font-size: 12px;
  font-weight: 800;
  color: rgba(255,255,255,.92);
}
.progress-detail{
  display: block;
  font-size: 11px;
  color: rgba(255,255,255,.6);
  margin-top: 2px;
}
.stream-event-msg { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.bet-opts{ display:flex; flex-direction:column; gap:8px; }
.bet-opt{ display:flex; align-items:center; justify-content:space-between; gap:10px; border: 1px dashed rgba(255,255,255,.10); border-radius: 12px; padding: 6px 8px; background: rgba(11,0,20,.55); }

.whales{ display:flex; flex-direction:column; gap:6px; }
.whale-row{ display:flex; justify-content:space-between; gap:10px; border: 1px dashed rgba(255,255,255,.10); border-radius: 12px; padding: 6px 8px; background: rgba(11,0,20,.55); }
.whale-name{ font-weight: 900; }
.whale-bal{ font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif; letter-spacing: 1px; -webkit-text-stroke: 1px rgba(0,0,0,.85); }

.btn-mini{
  margin-top: 8px;
  padding: 8px 10px;
  background: rgba(0,0,0,.55);
  border: 1px solid rgba(255,255,255,.22);
  color: #fff;
  font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  letter-spacing: 0.5px;
  border-radius: 10px;
  cursor: pointer;
  width: fit-content;
  text-transform: uppercase;
}
.btn-mini:hover{ border-color: rgba(255,255,255,.45); transform: translateY(-1px); }

.racing{ margin-top: 10px; display:flex; flex-direction:column; gap:8px; }
.racing-row{ display:grid; grid-template-columns: 44px 1fr; gap:10px; align-items:start; }
.racing-rank{ font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif; color: rgba(255,255,255,.85); text-shadow: 0 2px 0 rgba(0,0,0,.7); }
.racing-body{ display:flex; flex-direction:column; gap:6px; }
.racing-label{ display:flex; justify-content:space-between; gap:8px; font-size: 12px; }
.racing-bar{ position:relative; height: 16px; background: rgba(0,0,0,.55); border: 1px solid rgba(255,255,255,.16); border-radius: 999px; overflow:hidden; }
.racing-fill{ height:100%; background: linear-gradient(90deg, rgba(125,211,252,.95), rgba(236,72,153,.95)); box-shadow: 0 0 18px rgba(236,72,153,.35); transition: width 420ms cubic-bezier(.2,.8,.2,1); }
.racing-val{ position:absolute; right:6px; top:-1px; font-size: 12px; font-weight: 800; text-shadow: 0 2px 0 rgba(0,0,0,.7); }
.racing-row-current .racing-fill{ background: linear-gradient(90deg, rgba(255,255,0,.95), rgba(34,211,238,.95)); box-shadow: 0 0 22px rgba(255,255,0,.35); }

.timeline-section{ display:flex; flex-direction:column; gap:8px; }
.timeline-bounty{ display:flex; flex-direction:column; gap:6px; border: 1px dashed rgba(255,255,255,.10); border-radius: 12px; padding: 8px; background: rgba(11,0,20,.55); }
.timeline-row{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.timeline-title{ font-weight: 900; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.timeline-meter{ position:relative; height: 14px; background: rgba(0,0,0,.55); border: 1px solid rgba(255,255,255,.14); border-radius: 999px; overflow:hidden; }
.timeline-meter-fill{ height:100%; width:0%; background: linear-gradient(90deg, rgba(255,255,0,.30), rgba(236,72,153,.55)); transition: width 300ms ease; }
.timeline-meter-text{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size: 11px; text-shadow: 0 2px 0 rgba(0,0,0,.8); }
.timeline-pins{ display:flex; flex-direction:column; gap:6px; }
.timeline-pin{ display:flex; align-items:center; gap:8px; border: 1px dashed rgba(255,255,255,.10); border-radius: 12px; padding: 6px 8px; background: rgba(11,0,20,.55); }
.timeline-pin .muted{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width: 40%; }
.timeline-pin-system{ border-style: solid; border-color: rgba(255,255,255,.18); }
.timeline-pin-glow{ box-shadow: 0 0 18px rgba(255,255,0,.18), 0 0 30px rgba(236,72,153,.14); }
.timeline-icon{ font-family: "Bangers", ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif; letter-spacing: .5px; -webkit-text-stroke: 1px rgba(0,0,0,.75); text-shadow: 0 2px 0 rgba(0,0,0,.85); }

.tug{ display:flex; flex-direction:column; gap:8px; }
.tug-bar{ height: 12px; border: var(--stroke) solid var(--line); background: rgba(11,0,20,.55); overflow:hidden; clip-path: polygon(0% 0%, 6% 55%, 12% 0%, 18% 55%, 24% 0%, 30% 55%, 36% 0%, 42% 55%, 48% 0%, 54% 55%, 60% 0%, 66% 55%, 72% 0%, 78% 55%, 84% 0%, 90% 55%, 96% 0%, 100% 0%, 100% 100%, 0% 100%); }
.tug-left{ height:100%; background: rgba(0,229,255,.35); }
.tug-right{ height:100%; background: rgba(255,45,141,.35); margin-left:auto; }
.tug-labels{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
